<head>
  	<meta charset="utf-8">
  	<meta name="viewport" content="width=device-width">
	
	<title>
	
	  Understanding flexbox - Mike Riethmuller
	
	</title>

	<noscript>
		<link rel="stylesheet" href="https://madebymike.com.aucss/styles.min.css">
	</noscript>

	<meta name="twitter:card" content="summary" />
	<meta name="twitter:site" content="@MikeRiethmuller" />
	<meta name="twitter:title" content="Understanding flexbox - Mike Riethmuller" />
	<meta name="twitter:creator" content="@MikeRiethmuller" />
	<meta name="twitter:description" content="" />
	<meta name="twitter:image:src" content="https://madebymike.com.au/stuff/mug.jpg" />

	<link href='//fonts.googleapis.com/css?family=Handlee|Libre+Baskerville' rel='stylesheet' type='text/css'>
	<script>
		function loadCSS(e,t,n){"use strict";var i=window.document.createElement("link");var o=t||window.document.getElementsByTagName("script")[0];i.rel="stylesheet";i.href=e;i.media="only x";o.parentNode.insertBefore(i,o);setTimeout(function(){i.media=n||"all"})}
loadCSS( "/css/styles.min.css" );
	</script>

	
		<link rel="stylesheet" href="/css/understanding-flex.css">
	

</head>
<body class="">
<header>
	<div class="container">
		<ul>
			<li class="home"><a href="/">Home</a></li>
			<li class="writing"><a href="/writing">Writing</a></li>
			<li class="hire"><a href="/hire">Hire Me</a></li>
		</ul>
	</div>
</header>


<article>
  <section>
    <div class="container">
      <h1 class="post-title">Understanding flexbox</h1>
      <span class="post-date"><time>September 10, 2014</time></span>

      

      

<p>Instead of covering all properties of Flexbox this article focuses on understanding how Flexbox calculates the width of items. The examples in this article are all in the context of a horizontal layout, but the same logic applies if you use a vertical layout.</p>

<p>If you don&rsquo;t know what Flexbox is, it&rsquo;s a layout method best suited for distributing the available space inside a container, amongst child items, even when the number of child items, their size and even their DOM order is not known or might change. <a href="http://css-tricks.com/snippets/css/a-guide-to-flexbox/">Have a look at this guide</a>, and <a href="http://codepen.io/MadeByMike/pen/26cb650eaef356da925e75139537f74e">take a look at some examples</a> it might look like magic, but it&rsquo;s not, there is a method for calculating the size of child items.</p>

<p>The full algorithm for working out a flexbox layout in any situation is <a href="http://dev.w3.org/csswg/css-flexbox/#layout-algorithm">available here</a>, but as the spec rightly states:</p>

<blockquote>Authors writing web pages should generally be served well by the individual property descriptions, and do not need to read this section unless they have a deep-seated urge to understand arcane details of CSS layout.</blockquote>

<p>While this is true, I believe that designers and developers will still want to understand some parts of the layout algorithm. In particular so that they can roughly estimate width or height of flex items and confidently assign flex values without excessive trial and error.</p>

<h2 id="how-does-it-work">How does it work?</h2>

<p>Flexbox wants to fit in. If a flex item is allowed to be itself the flex-basis tells the browser what size it wants to be. Think of the flex-basis as a suggested size or ideal size. If a flex-basis is not set, or if it is set to &lsquo;auto&rsquo;, it will equal the initial size of the element. In other words, it will be the width of its inner content.</p>

<p><strong>Note:</strong> If a flex item has borders, margin or padding these values need to be added to the flex-basis according to the current box-sizing method when calculating the remaining space. They should also be added to the values at the end of calculation to get the final outer width of each flex item.</p>

<p>Once each flex-basis has been determined the browser adds these together along with any margins, borders or padding and checks to see if there is any space remaining in the container. If there is space remaining it will distribute this proportionally amongst the flex items, according to their flex-grow values. Similarly, if the space remaining is negative it will shrink each item proportionately, according to their flex-shrink values. Of course if the remaining space is 0, nothing more needs to be done.</p>

<h3 id="increasing-the-size-of-flex-items-flex-growing">Increasing the size of flex items (flex-growing)</h3>

<p>When the combined size of all the flex items is less than their container, the remaining space is distributed amongst all the items. The flex-grow attribute is used to determine how the remaining space should be allocated. To work out how much space is allocated to each item, take the ratio of the item&rsquo;s flex-grow value, over the total of all the other flex-grow values in the same container and multiply this by the space remaining. Here is an example:</p>

<div id="example-static-flex-1" class="flex-container">
    <div class="flex-item flex-item-1"><span>Item 1</span></div>
    <div class="flex-item flex-item-2"><span>Item 2</span></div>
</div>
<div class="example-container pre">
.flex-container{ width: 600px; }
.flex-item-1{ flex-basis: 200px; flex-grow: 3; }
.flex-item-2{ flex-basis: 200px; flex-grow: 1; }

Total basis: 400px
Space remaining:  200px

Item 1 grow factor: 3/4 &times; 200px = 150px
Item 2 grow factor: 1/4 &times; 200px = 50px
</div>

<p>The space remaining is 200px, this is equal to the width of the flex container (600px) minus the total basis (400px). Of the remaining space (200px), ¾ (150px) is allocated to item 1 and ¼ (50px) to item 2.</p>

<p>These fractions are determined by taking the items individual flex-grow value over the combined flex-grow value of all items. To get the final width of each item, add this result to the initial flex-basis (350px and 250px).</p>

<p>To give another example; if both items had a flex-grow value of 1, or in any case where they had the same number, they would each be allocated half the remaining space. If one item had a value of 2 and the other 1, the first flex item would be allocated ⅔ of the remaining space and the other ⅓. This works the same with 3, 4, 5 or any number of items although obviously the fractions will differ.</p>

<h3 id="decreasing-the-size-of-flex-items-flex-shrinking">Decreasing the size of flex items (flex-shrinking)</h3>

<p>If the space remaining is a negative this means that the flex container is smaller than the preferred width of all the flex items. They are going to have to shrink. By assigning a flex-shrink value we can control much space each flex item will surrender.</p>

<p>For some reason the method for working out flex shrink differs slightly and is a little harder.</p>

<p>Rather than working out the ratio of an items flex-shrink value against the total of all flex-shrink values, for each item we first multiply its flex shrink value by its basis and then workout the ratio of this number against the sum of all flex-basis values, and multiply by the space remaining.</p>

<div id="example-static-flex-2" class="flex-container">
    <div class="flex-item flex-item-1"><span>Item 1</span></div>
    <div class="flex-item flex-item-2"><span>Item 2</span></div>
    <div class="flex-item flex-item-3"><span>Item 2</span></div>
</div>  
<div class="example-container pre">
.flex-container{ width: 600px; }
.flex-item-1{ flex-basis: 100px; flex-shrink: 1; }
.flex-item-2{ flex-basis: 400px; flex-shrink: 1; }
.flex-item-3{ flex-basis: 400px; flex-shrink: 1; }

Total basis: 900px
Space remaining: -300px

Item 1 shrink factor: (1&times;100) / (100px + 400px + 400px) = .111 &times; -300px = -33.333px
Item 2 shrink factor: (1&times;400) / (100px + 400px + 400px) = .444 &times; -300px = -133.333px
Item 3 shrink factor: (1&times;400) / (100px + 400px + 400px) = .444 &times; -300px = -133.333px
</div>

<p>The space remaining is -300px, this is equal to the width of the flex container (600px) minus the total basis (900px). To find the shrink factor for each, multiply its flex-shrink value by its flex-basis value (1&times;100px or 1&times;400px), then divide this by the combined sum of the flex-shrink multiply the flex-basis for all items (1&times;100px) + (1&times;400px) + (1&times;400px).</p>

<p>Finally multiply this number by the space remaining (-300px) to get the amount to reduce each item by (33.33px and 66.66px).</p>

<p>In the above example if the flex shrink of the first item was to change to 2 the result would differ as follows:</p>

<div class="example-container pre">.flex-container{ width: 600px; }
.flex-item-1{ flex-basis: 100px; flex-shrink: 2; }
.flex-item-2{ flex-basis: 400px; flex-shrink: 1; }
.flex-item-3{ flex-basis: 400px; flex-shrink: 1; }

Total basis: 900px
Space remaining: -300px

Item 1 shrink factor: (2&times;100) / (200px + 400px + 400px) = .2 &times; -300px = -60px
Item 2 shrink factor: (1&times;400) / (200px + 400px + 400px) = .4 &times; -300px = -120px
Item 3 shrink factor: (1&times;400) / (200px + 400px + 400px) = .4 &times; -300px = -120px
</div>

<h2 id="more-info">More info</h2>

<ul>
<li>I built a little <a href="/demos/flexbox-tester/">tool for testing flexbox calculations</a>,</li>
<li>Chris Wright covers his <a href="http://chriswrightdesign.com/experiments/flexbox-adventures/">adventures with flexbox</a>,</li>
<li>Chris Coyier <a href="http://css-tricks.com/snippets/css/a-guide-to-flexbox/">a Complete Guide to Flexbox</a>,</li>
<li>Chris Mills, wrote a great <a href="https://dev.opera.com/articles/flexbox-basics/">introduction to flexbox</a>,</li>
<li>If you really must, every detail is available <a href="http://dev.w3.org/csswg/css-flexbox/#layout-algorithm">in the spec</a></li>
</ul>
 

    </div>
  </section>
</article>





    <footer>
      <section>
        <div class="container">
          <ul>
            <li><a href="http://codepen.io/MadeByMike/"><svg class="logo"><use xlink:href="#codepen-logo"></use></svg>Me</a></li>
            <li><a href="https://twitter.com/MikeRiethmuller"><svg class="logo"><use xlink:href="#twitter-logo"></use></svg>Me</a></li>
            <li><a href="https://github.com/MadeByMike"><svg class="logo"><use xlink:href="#github-logo"></use></svg>Me</a></li>
          </ul>
        </div>
      </section>
    </footer>

      <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
	<symbol id="codepen-logo" viewBox="0 0 512 512">
		<path d="M427 201.9c-0.6-4.2-2.9-8-6.4-10.3L264.2 87.3c-4.9-3.3-11.4-3.3-16.3 0L91.4 191.6c-4 2.7-6.5 7.4-6.5 12.2v104.3c0 4.8 2.5 9.6 6.5 12.2l156.4 104.3c4.9 3.3 11.4 3.3 16.3 0L420.6 320.4c4-2.6 6.6-7.4 6.6-12.2V203.9C427.1 203.2 427.1 202.6 427 201.9 427 201.7 427.1 202.6 427 201.9zM270.7 127.1l115.2 76.8 -51.5 34.4 -63.8-42.7V127.1zM241.3 127.1v68.6l-63.8 42.7 -51.5-34.4L241.3 127.1zM114.3 231.4l36.8 24.6 -36.8 24.6V231.4zM241.3 384.9L126.1 308.1l51.5-34.4 63.8 42.6V384.9zM256 290.8l-52-34.8 52-34.8 52 34.8L256 290.8zM270.7 384.9V316.3l63.8-42.6 51.5 34.4L270.7 384.9zM397.7 280.6l-36.8-24.6 36.8-24.6V280.6z"/>
	</symbol>
	<symbol id="github-logo" viewBox="0 0 512 512">
		<path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z"/>
	</symbol>
	<symbol id="twitter-logo" viewBox="0 0 512 512">
		<path d="M419.6 168.6c-11.7 5.2-24.2 8.7-37.4 10.2 13.4-8.1 23.8-20.8 28.6-36 -12.6 7.5-26.5 12.9-41.3 15.8 -11.9-12.6-28.8-20.6-47.5-20.6 -42 0-72.9 39.2-63.4 79.9 -54.1-2.7-102.1-28.6-134.2-68 -17 29.2-8.8 67.5 20.1 86.9 -10.7-0.3-20.7-3.3-29.5-8.1 -0.7 30.2 20.9 58.4 52.2 64.6 -9.2 2.5-19.2 3.1-29.4 1.1 8.3 25.9 32.3 44.7 60.8 45.2 -27.4 21.4-61.8 31-96.4 27 28.8 18.5 63 29.2 99.8 29.2 120.8 0 189.1-102.1 185-193.6C399.9 193.1 410.9 181.7 419.6 168.6z"/>
	</symbol>
	<symbol id="arrow-icon" viewBox="0 0 10 10">
		<polygon points="1,0 9,5 1,10 "/>
	</symbol>
	<symbol id="arrow-icon-reverse" viewBox="0 0 10 10">
		<polygon points="9,0 1,5 9,10"/>
	</symbol>
  </svg>

    <script type="text/javascript">
if ( 'serviceWorker' in navigator && (typeof Cache !== 'undefined' && Cache.prototype.addAll) ) {
  navigator.serviceWorker.register('/sw.js');
}
</script>




  </body>
</html>